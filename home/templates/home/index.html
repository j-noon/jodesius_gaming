<!-- home/templates/home/index.html -->
{% extends 'home/base.html' %}
{% load static %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'home/css/home.css' %}">
    <link rel="stylesheet" href="{% static 'base/css\base.css' %}">  
{% endblock %}

{% block content %}
    <!-- Hero Image -->
    <div id="hero-image">
        <img src="http://res.cloudinary.com/ddmslr9na/image/upload/v1752347082/gallery/cjvjaigtcwbeckmcthfo.webp" alt="image of a fire place in a medieval castle" />
    </div>

    <!-- About Me -->
    <div id="about-me">
        <button id="abt-me-h2">About me</button>
        <p class="abt-me-p-hide">
            Professional button-masher, amateur voice actor, and part-time hacker
            (the legal kind, I swear). I stream adventure games and solo story games
            because NPCs don’t interrupt me when I’m talking to myself. But wait,
            there’s edutainment too! I dive into web dev, pentesting tools, and
            cybersecurity tips — basically teaching you how to break stuff… and then
            responsibly report it. So if you like thrilling stories, nerdy tech
            talk, and occasional keyboard rage, smash that follow and let’s get
            weird (and slightly smarter) together.
        </p>
    </div>

    <!-- Trailer -->
    <div id="trailer-container">
        <h2>Trailer</h2>
        <video controls autoplay muted loop src="{% static 'assets/media/twitch-trailer.webm' %}">
            <p>Please refresh page or update your browser</p>
        </video>
    </div>

    {% if messages %}
    <div id="comment-message">
        {% for message in messages %}
            <p>{{ message }}</p>
        {% endfor %}
    </div>
    {% endif %}

<!-- Comments Section styled as chat -->
<div id="comments-container">
  <h2 id="coments-title">Comments and Suggestions</h2>


  <div id="comment-feed">
    {% for comment in comments %}
      <div class="single-comment">
        <strong>{{ comment.user.username }}:</strong> {{ comment.text }}
      </div>
    {% endfor %}
  </div>

  {% if user.is_authenticated %}
    <form method="POST">
      {% csrf_token %}
      {{ form.text }}
      <button id="comment-btn" type="submit">Send</button>
    </form>
  {% else %}
    <p style="text-align: center;">Please <a href="{% url 'login' %}">log in</a> to comment.</p>
  {% endif %}
</div>
{% endblock %}

{% block extra_js %}
<script>
  setTimeout(() => {
    const messageBox = document.getElementById('comment-message');
    if (messageBox) {
      messageBox.style.transition = 'transform 1s ease-out, opacity 1s ease-out';
      messageBox.style.transform = 'translateX(-100%)';
      messageBox.style.opacity = '0';
      setTimeout(() => {
        messageBox.remove();  // Remove it from the DOM
      }, 1000);
    }
  }, 10000);  // 10 seconds
</script>
<script src="{% static 'home/js/aboutme.js' %}"></script>
{% endblock %}