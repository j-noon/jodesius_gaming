<!-- home/templates/home/index.html -->
 
{% extends 'home/base.html' %}
{% load static %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'home/css/home.css' %}">
{% endblock %}

{% block content %}
    <!-- Hero Image -->
    <div id="hero-image">
        <img src="{% static 'assets/images/just-chatting.webp' %}" alt="image of a fire place in a medieval castle" />
    </div>

    <!-- About Me -->
    <div id="about-me">
        <button id="abt-me-h2">About me</button>
        <p class="abt-me-p-hide">
            Professional button-masher, amateur voice actor, and part-time hacker...
        </p>
    </div>

    <!-- Trailer -->
    <div id="trailer-container">
        <h2>Trailer</h2>
        <video controls autoplay muted loop src="{% static 'assets/media/twitch-trailer.webm' %}">
            <p>Please refresh page or update your browser</p>
        </video>
    </div>

    {% if messages %}
    <div id="comment-message">
        {% for message in messages %}
            <p>{{ message }}</p>
        {% endfor %}
    </div>
{% endif %}

    <!-- Comments Section -->
   <div id="comments-container">
    <h2 id="coments-title"> Comments and Suggestions </h2>

    {% if user.is_authenticated %}
        <form method="POST">
            {% csrf_token %}
            {{ form.as_p }}
            <button id="comment-btn" type="submit">Leave a Comment</button>
        </form>
    {% else %}
        <p style="text-align: center;">Please <a href="{% url 'login' %}">log in</a> to comment.</p>
    {% endif %}

    <ul>
        {% for comment in comments %}
            <li><strong>{{ comment.user.username }}:</strong> {{ comment.content }}</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}


{% block extra_js %}
<script>
  setTimeout(() => {
    const messageBox = document.getElementById('comment-message');
    if (messageBox) {
      messageBox.style.transition = 'transform 1s ease-out, opacity 1s ease-out';
      messageBox.style.transform = 'translateX(-100%)';
      messageBox.style.opacity = '0';
      setTimeout(() => {
        messageBox.remove();  // Remove it from the DOM
      }, 1000);
    }
  }, 10000);  // 10 seconds
</script>
{% endblock %}
